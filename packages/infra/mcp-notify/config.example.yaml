# MCP Notify Configuration
# Copy this file to config.yaml and customize as needed

server:
  host: "0.0.0.0"
  port: 8080
  cors:
    origins:
      - "*"
    methods:
      - "GET"
      - "POST"
      - "PUT"
      - "DELETE"
      - "OPTIONS"
    headers:
      - "*"
    credentials: false

registry:
  url: "https://registry.modelcontextprotocol.io"
  poll_interval: 5m
  timeout: 30s
  retry_attempts: 3
  retry_delay: 5s
  user_agent: "MCP-Notify/1.0"

database:
  # PostgreSQL connection string
  # Override with MCP_WATCH_DATABASE_URL environment variable
  url: "postgres://user:password@localhost:5432/mcp_watch?sslmode=disable"
  max_connections: 25
  max_idle_conns: 5
  conn_max_lifetime: 1h
  conn_max_idle_time: 30m

redis:
  # Optional Redis for caching
  # Override with MCP_WATCH_REDIS_URL environment variable
  url: "redis://localhost:6379/0"
  max_retries: 3
  dial_timeout: 5s
  read_timeout: 3s
  write_timeout: 3s
  pool_size: 10

notifications:
  discord:
    enabled: true
    rate_limit: "30/min"
    retry_attempts: 3
    retry_delay: 1s

  slack:
    enabled: true
    rate_limit: "30/min"
    retry_attempts: 3
    retry_delay: 1s

  email:
    enabled: true
    smtp:
      host: "smtp.example.com"
      port: 587
      username: ""
      password: ""  # Override with MCP_WATCH_SMTP_PASSWORD
      from: "mcp-notify@example.com"
      tls: true
    retry_attempts: 3
    retry_delay: 5s

  webhook:
    enabled: true
    timeout: 10s
    retry_attempts: 3
    retry_delay: 2s
    max_body_size: 1048576  # 1MB

  rss:
    enabled: true
    items_per_feed: 100
    title: "MCP Registry Changes"
    description: "Recent changes in the MCP Registry"
    base_url: "https://watch.mcpregistry.dev"

telemetry:
  metrics:
    enabled: true
    port: 9090
  tracing:
    enabled: false
    endpoint: ""
    service_name: "mcp-notify"
    sample_rate: 0.1

log_level: info  # debug, info, warn, error
